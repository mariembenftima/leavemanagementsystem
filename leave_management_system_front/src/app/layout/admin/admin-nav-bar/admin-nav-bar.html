<nav class="navbar" (click)="closeDropdowns()">
  <div class="nav-left">
    <div class="nav-logo">
      <div class="logo-icon">admin</div>
      <span class="nav-title">Panel</span>
    </div>
  </div>

  <div class="nav-right">
    <div class="nav-actions">
      <div class="dropdown-container">
        <button class="action-btn settings" (click)="toggleSettings(); $event.stopPropagation()" title="Settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 10v6m11-7h-6m-10 0H1m15.5-3.5L19 12l-2.5-2.5M5 14.5L2.5 12 5 9.5"></path>
          </svg>
        </button>

        <div class="dropdown-menu settings-dropdown" *ngIf="showSettingsDropdown">
          <div class="dropdown-header">
            <h3>Settings</h3>
          </div>
          <div class="dropdown-content">
            <button class="dropdown-item" *ngFor="let item of settingsItems"
              (click)="handleSettingsAction(item.action)">
              <span class="item-icon">{{ item.icon }}</span>
              <span class="item-label">{{ item.label }}</span>
            </button>
          </div>
        </div>
      </div>

      <div class="dropdown-container">
        <button class="action-btn notification" (click)="toggleNotifications(); $event.stopPropagation()"
          title="Notifications">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
          </svg>
          <div class="notification-badge" *ngIf="getUnreadNotificationsCount() > 0">
            {{ getUnreadNotificationsCount() }}
          </div>
        </button>

        <div class="dropdown-menu notifications-dropdown" *ngIf="showNotificationDropdown">
          <div class="dropdown-header">
            <h3>Notifications</h3>
            <button class="mark-all-read" (click)="markAllNotificationsAsRead()"
              *ngIf="getUnreadNotificationsCount() > 0">
              Mark all as read
            </button>
          </div>
          <div class="dropdown-content">
            <div class="notification-item" *ngFor="let notification of notifications"
              [class.unread]="!notification.read" (click)="markNotificationAsRead(notification.id)">
              <div class="notification-icon">
                {{ getNotificationIcon(notification.type) }}
              </div>
              <div class="notification-content">
                <div class="notification-title">{{ notification.title }}</div>
                <div class="notification-message">{{ notification.message }}</div>
                <div class="notification-time">{{ formatTime(notification.timestamp) }}</div>
              </div>
              <button class="notification-delete"
                (click)="deleteNotification(notification.id); $event.stopPropagation()">
                √ó
              </button>
            </div>
            <div class="no-notifications" *ngIf="notifications.length === 0">
              <p>No notifications</p>
            </div>
          </div>
        </div>
      </div>

      <button class="action-btn help" (click)="showHelp()" title="Help">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <circle cx="12" cy="17" r="1"></circle>
        </svg>
      </button>
    </div>

    <div class="dropdown-container">
      <div class="user-section" (click)="toggleUserMenu(); $event.stopPropagation()">
        <div class="user-profile">
          <div class="user-avatar">{{ currentUser.avatar }}</div>
          <div class="user-info">
            <div class="user-name">{{ currentUser.name }}</div>
            <div class="user-email">{{ currentUser.email }}</div>
          </div>
          <div class="dropdown-arrow">‚ñº</div>
        </div>
      </div>

      <div class="dropdown-menu user-dropdown" *ngIf="showUserDropdown">
        <div class="dropdown-header">
          <div class="user-details">
            <div class="user-avatar-large">{{ currentUser.avatar }}</div>
            <div class="user-info-detailed">
              <div class="user-name-large">{{ currentUser.name }}</div>
              <div class="user-role">{{ currentUser.role }}</div>
              <div class="user-email-small">{{ currentUser.email }}</div>
            </div>
          </div>
        </div>
        <div class="dropdown-content">
          <button class="dropdown-item" (click)="navigateTo('/admin/profile')">
            <span class="item-icon">üë§</span>
            <span class="item-label">My Profile</span>
          </button>
          <button class="dropdown-item" (click)="handleSettingsAction('account')">
            <span class="item-icon">‚öôÔ∏è</span>
            <span class="item-label">Account Settings</span>
          </button>
          <button class="dropdown-item" (click)="showHelp()">
            <span class="item-icon">‚ùì</span>
            <span class="item-label">Help & Support</span>
          </button>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item logout-item" (click)="logout()">
            <span class="item-icon">üö™</span>
            <span class="item-label">Logout</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</nav>